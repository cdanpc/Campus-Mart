@layer utilities {
  .cm-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: 600;
    line-height: 1;
    border-radius: var(--radius-sm);
    border: 1px solid transparent;
    cursor: pointer;
    transition: background .15s ease, color .15s ease, border-color .15s ease, box-shadow .15s ease;
    user-select: none;
  }
  .cm-btn:disabled { opacity: .6; cursor: not-allowed; }

  /* Sizes */
  .cm-btn--sm { padding: 6px 10px; font-size: 14px; }
  .cm-btn--md { padding: 8px 12px; font-size: 14px; }
  .cm-btn--lg { padding: 12px 16px; font-size: 16px; }
  .cm-btn--block { width: 100%; }

  /* Variants */
  .cm-btn--primary { background: var(--button-primary-bg); color: var(--button-primary-text); }
  .cm-btn--primary:hover { background: var(--color-primary-700); }

  .cm-btn--secondary { background: var(--bg-subtle); color: var(--text-primary); border-color: var(--border-color); }
  .cm-btn--secondary:hover { background: var(--bg-surface); }

  .cm-btn--outline { background: transparent; color: var(--text-primary); border-color: var(--border-color); }
  .cm-btn--outline:hover { background: var(--bg-subtle); }

  .cm-btn--ghost { background: transparent; color: var(--text-primary); border-color: transparent; }
  .cm-btn--ghost:hover { background: var(--bg-subtle); }

  .cm-btn--danger { background: var(--color-danger-500); color: #fff; }
  .cm-btn--danger:hover { filter: brightness(0.92); }

  /* Spinner (used inside buttons too) */
  .cm-spinner {
    display: inline-block;
    border: 2px solid rgba(255,255,255,0.3);
    border-top-color: rgba(255,255,255,0.95);
    border-radius: 50%;
    animation: cm-spin .8s linear infinite;
  }
  /* for non-primary buttons on light bg */
  .cm-btn:not(.cm-btn--primary):not(.cm-btn--danger) .cm-spinner {
    border-color: var(--border-color);
    border-top-color: var(--text-secondary);
  }

  @keyframes cm-spin { to { transform: rotate(360deg); } }
}
